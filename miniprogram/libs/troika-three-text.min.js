// --- 这是为小程序环境特制的内容，请全部复制 ---
(function() {
    const factory = (function(t,e){"use strict";var n=function(){function t(t,e){var n,r,o,i,a,s;for(this.Et=[],n=0;n<t.length;n+=1){for(this.Et[n]=0,o=1,r=0;r<e;r+=1)this.Et[n]+=t[n]>=o&&t[n]<o+t[n+r+1]?1:0,o+=t[n+r+1];this.Et[n]%=t[n+e+1];}for(this.Pt=e,this.It=new Array(t.length),s=new Array(e+1),n=0;n<t.length;n+=1)for(r=0;r<e+1;r+=1)s[r]=t[n+r];for(this.It[n]=[s[e]],i=e-1;0<=i;i-=1)this.It[n].unshift(s[i]+this.It[n][0]);for(a=1;a<t.length;a+=1)if(this.Et[a-1]===t[a+e]){var u=this.It[a-1];this.It[a]=[u[u.length-1]];for(i=e-1;0<=i;i-=1)this.It[a].unshift(u[i+1]-u[i]+this.It[a][0])}}}var r,o,i;function a(t,e,n,r){return new i(t,e,n,r)}function s(t,e,i,a,s,u,f,c){var l={};return l.name=t,l.type=e,l.size=i,l.offset=a,l.stride=s,l.normalized=f,l.count=c,l.instanced=u,l.set=function(t,e,n,r){this.buffer=t,this.array=e,this.spacing=n,this.divisor=r},l}t.WebGLUniform=function t(e,n,r){this.name=e,this.id=n,this.value=r,this.setValue=function(e){var n=this.preSetter?this.preSetter(e,this.value):e,i=this.value;i.length&&n.length?i.set?i.set(n):function(t,e){for(var n=0,r=t.length;n<r;n++)t[n]=e[n]}(i,n):i.copy?i.copy(n):i.x?i.set(n.x,n.y,n.z):i.r?i.setRGB(n.r,n.g,n.b):this.value=n}},t.WebGLShader=function(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i},t.WebGLRenderer=function(i){var s,u,f,c,l,h,p,d,v,m,g,_,y,b,w,S,A,x,E,D,P,I,M,O,T,C,F,L,R,k,z,N,W,H,B,U,j,G,K,V,Z,q,X,Y,J,$,tt,et,nt,rt,ot,it,at,st,ut,ft,ct,lt,ht,pt,dt,vt,mt,gt,_t,yt,bt,wt,St,At,xt,Et,Dt,Pt,It,Mt,Ot,Tt,Ct,Ft,Lt,Rt,zt,Nt,Wt,Ht,Bt,Ut,jt,Gt,Kt,Vt,Zt,qt,Xt,Yt,Jt,$t,te,ee,ne,re,oe,ie,ae,se,ue,fe,ce,le,he,pe,de,ve,me,ge,_e,ye,be,we,Se,Ae,xe,Ee,De,Pe,Ie,Me,Oe,Te,Ce,Fe,Le,Re,ze,Ne,We,He,Be,Ue,je,Ge,Ke,Ve,Ze,qe,Xe,Ye,Je,$e,tn,en,nn,rn,on,an,sn,un,fn,cn,ln,hn,pn,dn,vn,mn,gn,_n,yn,bn,wn,Sn,An,xn,En,Dn,Pn,In,Mn,On,Tn,Cn,Fn,Ln,Rn,zn,Nn,Wn,Hn,Bn,Un,jn,Gn,Kn,Vn,Zn,qn,Xn,Yn,Jn,$n,tr,er,nr,rr,or,ir,ar,sr,ur,fr,cr,lr,hr,pr,dr,vr,mr,gr,_r,yr,br,wr,Sr,Ar,xr,Er,Dr,Pr,Ir,Mr,Or,Tr,Cr,Fr,Lr,Rr,zr,Nr,Wr,Hr,Br,Ur,jr,Gr,Kr,Vr,Zr,qr,Xr,Yr,Jr,$r,to,eo,no,ro,oo,io,ao,so,uo,fo,co,lo,ho,po,vo,mo,go,_o,yo,bo,wo,So,Ao,xo,Eo,Do,Po,Io,Mo,Oo,To,Co,Fo,Lo,Ro,zo,No,Wo,Ho,Bo,Uo,jo,Go,Ko,Vo,Zo,qo,Xo,Yo,Jo,$o,ti,ei,ni,ri,oi,ii,ai,si,ui,fi,ci,li,hi,pi,di,vi,mi,gi,_i,yi,bi,wi,Si,Ai,xi,Ei,Di,Pi,Ii,Mi,Oi,Ti,Ci,Fi,Li,Ri,zi,Ni,Wi,Hi,Bi,Ui,ji,Gi,Ki,Vi,Zi,qi,Xi,Yi,Ji,$i,tl,el,nl,rl,ol,il,al,sl,ul,fl,cl,ll,hl,pl,dl,vl,ml,gl,_l,yl,bl,wl,Sl,Al,xl,El,Dl,Pl,Il,Ml,Ol,Tl,Cl,Fl,Ll,Rl,zl,Nl,Wl,Hl,Bl,Ul,jl,Gl,Kl,Vl,Zl,ql,Xl,Yl,Jl,$l,th,eh,nh,rh,oh,ih,ah,sh,uh,fh,ch,lh,hh,ph,dh,vh,mh,gh,_h,yh,bh,wh,Sh,Ah,xh,Eh,Dh,Ph,Ih,Mh,Oh,Th,Ch,Fh,Lh,Rh,zh,Nh,Wh,Hh,Bh,Uh,jh,Gh,Kh,Vh,Zh,qh,Xh,Yh,Jh,$h,tp,ep,np,rp,op,ip,ap,sp,up,fp,cp,lp,hp,pp,dp,vp,mp,gp,_p,yp,bp,wp,Sp,Ap,xp,Ep,Dp,Pp,Ip,Mp,Op,Tp,Cp,Fp,Lp,Rp,zp,Np,Wp,Hp,Bp,Up,jp,Gp,Kp,Vp,Zp,qp,Xp,Yp,Jp,$p,td,ed,nd,rd,od,id,ad,sd,ud,fd,cd,ld,hd,pd,dd,vd,md,gd,_d,yd,bd,wd,Sd,Ad,xd,Ed,Dd,Pd,Id,Md,Od,Td,Cd,Fd,Ld,Rd,zd,Nd,Wd,Hd,Bd,Ud,jd,Gd,Kd,Vd,Zd,qd,Xd,Yd,Jd,$d,tv,ev,nv,rv,ov,iv,av,sv,uv,fv,cv,lv,hv,pv,dv,vv,mv,gv,_v,yv,bv,wv,Sv,Av,xv,Ev,Dv,Pv,Iv,Mv,Ov,Tv,Cv,Fv,Lv,Rv,zv,Nv,Wv,Hv,Bv,Uv,jv,Gv,Kv,Vv,Zv,qv,Xv,Yv,Jv,$v,tm,em,nm,rm,om,im,am,sm,um,fm,cm,lm,hm,pm,dm,vm,mm,gm,_m,ym,bm,wm,Sm,Am,xm,Em,Dm,Pm,Im,Mm,Om,Tm,Cm,Fm,Lm,Rm,zm,Nm,Wm,Hm,Bm,Um,jm,Gm,Km,Vm,Zm,qm,Xm,Ym,Jm,$m,tg,eg,ng,rg,og,ig,ag,sg,ug,fg,cg,lg,hg,pg,dg,vg,mg,gg,_g,yg,bg,wg,Sg,Ag,xg,Eg,Dg,Pg,Ig,Mg,Og,Tg,Cg,Fg,Lg,Rg,zg,Ng,Wg,Hg,Bg,Ug,jg,Gg,Kg,Vg,Zg,qg,Xg,Yg,Jg,$g,t_,e_,n_,r_,o_,i_,a_,s_,u_,f_,c_,l_,h_,p_,d_,v_,m_,g_,__,y_,b_,w_,S_,A_,x_,E_,D_,P_,I_,M_,O_,T_,C_,F_,L_,R_,z_,N_,W_,H_,B_,U_,j_,G_,K_,V_,Z_,q_,X_,Y_,J_,$_,ty,ey,ny,ry,oy,iy,ay,sy,uy,fy,cy,ly,hy,py,dy,vy,my,gy,_y,yy,by,wy,Sy,Ay,xy,Ey,Dy,Py,Iy,My,Oy,Ty,Cy,Fy,Ly,Ry,zy,Ny,Wy,Hy,By,Uy,jy,Gy,Ky,Vy,Zy,qy,Xy,Yy,Jy,$y,tb,eb,nb,rb,ob,ib,ab,sb,ub,fb,cb,lb,hb,pb,db,vb,mb,gb,_b,yb,bb,wb,Sb,Ab,xb,Eb,Db,Pb,Ib,Mb,Ob,Tb,Cb,Fb,Lb,Rb,zb,Nb,Wb,Hb,Bb,Ub,jb,Gb,Kb,Vb,Zb,qb,Xb,Yb,Jb,$b,tw,ew,nw,rw,ow,iw,aw,sw,uw,fw,cw,lw,hw,pw,dw,vw,mw,gw,_w,yw,bw,ww,Sw,Aw,xw,Ew,Dw,Pw,Iw,Mw,Ow,Tw,Cw,Fw,Lw,Rw,zw,Nw,Ww,Hw,Bw,Uw,jw,Gw,Kw,Vw,Zw,qw,Xw,Yw,Jw,$w,tS,eS,nS,rS,oS,iS,aS,sS,uS,fS,cS,lS,hS,pS,dS,vS,mS,gS,_S,yS,bS,wS,SS,AS,xS,ES,DS,PS,IS,MS,OS,TS,CS,FS,LS,RS,zS,NS,WS,HS,BS,US,jS,GS,KS,VS,ZS,qS,XS,YS,JS,$S,tA,eA,nA,rA,oA,iA,aA,sA,uA,fA,cA,lA,hA,pA,dA,vA,mA,gA,_A,yA,bA,wA,SA,AA,xA,EA,DA,PA,IA,MA,OA,TA,CA,FA,LA,RA,zA,NA,WA,HA,BA,UA,jA,GA,KA,VA,ZA,qA,XA,YA,JA,$A,tx,ex,nx,rx,ox,ix,ax,sx,ux,fx,cx,lx,hx,px,dx,vx,mx,gx,_x,yx,bx,wx,Sx,Ax,xx,Ex,Dx,Px,Ix,Mx,Ox,Tx,Cx,Fx,Lx,Rx,zx,Nx,Wx,Hx,Bx,Ux,jx,Gx,Kx,Vx,Zx,qx,Xx,Yx,Jx,$x,tE,eE,nE,rE,oE,iE,aE,sE,uE,fE,cE,lE,hE,pE,dE,vE,mE,gE,_E,yE,bE,wE,SE,AE,xE,EE,DE,PE,IE,ME,OE,TE,CE,FE,LE,RE,zE,NE,WE,HE,BE,UE,jE,GE,KE,VE,ZE,qE,XE,YE,JE,$E,tD,eD,nD,rD,oD,iD,aD,sD,uD,fD,cD,lD,hD,pD,dD,vD,mD,gD,_D,yD,bD,wD,SD,AD,xD,ED,DD,PD,ID,MD,OD,TD,CD,FD,LD,RD,zD,ND,WD,HD,BD,UD,jD,GD,KD,VD,ZD,qD,XD,YD,JD,$D,tP,eP,nP,rP,oP,iP,aP,sP,uP,fP,cP,lP,hP,pP,dP,vP,mP,gP,_P,yP,bP,wP,SP,AP,xP,EP,DP,PP,IP,MP,OP,TP,CP,FP,LP,RP,zP,NP,WP,HP,BP,UP,jP,GP,KP,VP,ZP,qP,XP,YP,JP,$P,tI,eI,nI,rI,oI,iI,aI,sI,uI,fI,cI,lI,hI,pI,dI,vI,mI,gI,_I,yI,bI,wI,SI,AI,xI,EI,DI,PI,II,MI,OI,TI,CI,FI,LI,RI,zI,NI,WI,HI,BI,UI,jI,GI,KI,VI,ZI,qI,XI,YI,JI,$I,tM,eM,nM,rM,oM,iM,aM,sM,uM,fM,cM,lM,hM,pM,dM,vM,mM,gM,_M,yM,bM,wM,SM,AM,xM,EM,DM,PM,IM,MM,OM,TM,CM,FM,LM,RM,zM,NM,WM,HM,BM,UM,jM,GM,KM,VM,ZM,qM,XM,YM,JM,$M,tO,eO,nO,rO,oO,iO,aO,sO,uO,fO,cO,lO,hO,pO,dO,vO,mO,gO,_O,yO,bO,wO,SO,AO,xO,EO,DO,PO,IO,MO,OO,TO,CO,FO,LO,RO,zO,NO,WO,HO,BO,UO,jO,GO,KO,VO,ZO,qO,XO,YO,JO,$O,tT,eT,nT,rT,oT,iT,aT,sT,uT,fT,cT,lT,hT,pT,dT,vT,mT,gT,_T,yT,bT,wT,ST,AT,xT,ET,DT,PT,IT,MT,OT,TT,CT,FT,LT,RT,zT,NT,WT,HT,BT,UT,jT,GT,KT,VT,ZT,qT,XT,YT,JT,$T,tC,eC,nC,rC,oC,iC,aC,sC,uC,fC,cC,lC,hC,pC,dC,vC,mC,gC,_C,yC,bC,wC,SC,AC,xC,EC,DC,PC,IC,MC,OC,TC,CC,FC,LC,RC,zC,NC,WC,HC,BC,UC,jC,GC,KC,VC,ZC,qC,XC,YC,JC,$C,tF,eF,nF,rF,oF,iF,aF,sF,uF,fF,cF,lF,hF,pF,dF,vF,mF,gF,_F,yF,bF,wF,SF,AF,xF,EF,DF,PF,IF,MF,OF,TF,CF,FF,LF,RF,zF,NF,WF,HF,BF,UF,jF,GF,KF,VF,ZF,qF,XF,YF,JF,$F,tL,eL,nL,rL,oL,iL,aL,sL,uL,fL,cL,lL,hL,pL,dL,vL,mL,gL,_L,yL,bL,wL,SL,AL,xL,EL,DL,PL,IL,ML,OL,TL,CL,FL,LL,RL,zL,NL,WL,HL,BL,UL,jL,GL,KL,VL,ZL,qL,XL,YL,JL,$L,tR,eR,nR,rR,oR,iR,aR,sR,uR,fR,cR,lR,hR,pR,dR,vR,mR,gR,_R,yR,bR,wR,SR,AR,xR,ER,DR,PR,IR,MR,OR,TR,CR,FR,LR,RR,zR,NR,WR,HR,BR,UR,jR,GR,KR,VR,ZR,qR,XR,YR,JR,$R,tz,ez,nz,rz,oz,iz,az,sz,uz,fz,cz,lz,hz,pz,dz,vz,mz,gz,_z,yz,bz,wz,Sz,Az,xz,Ez,Dz,Pz,Iz,Mz,Oz,Tz,Cz,Fz,Lz,Rz,zz,Nz,Wz,Hz,Bz,Uz,jz,Gz,Kz,Vz,Zz,qz,Xz,Yz,Jz,$z,tN,eN,nN,rN,oN,iN,aN,sN,uN,fN,cN,lN,hN,pN,dN,vN,mN,gN,_N,yN,bN,wN,SN,AN,xN,EN,DN,PN,IN,MN,ON,TN,CN,FN,LN,RN,zN,NN,WN,HN,BN,UN,jN,GN,KN,VN,ZN,qN,XN,YN,JN,$N,tW,eW,nW,rW,oW,iW,aW,sW,uW,fW,cW,lW,hW,pW,dW,vW,mW,gW,_W,yW,bW,wW,SW,AW,xW,EW,DW,PW,IW,MW,OW,TW,CW,FW,LW,RW,zW,NW,WW,HW,BW,UW,jW,GW,KW,VW,ZW,qW,XW,YW,JW,$W,tH,eH,nH,rH,oH,iH,aH,sH,uH,fH,cH,lH,hH,pH,dH,vH,mH,gH,_H,yH,bH,wH,SH,AH,xH,EH,DH,PH,IH,MH,OH,TH,CH,FH,LH,RH,zH,NH,WH,HH,BH,UH,jH,GH,KH,VH,ZH,qH,XH,YH,JH,$H,tB,eB,nB,rB,oB,iB,aB,sB,uB,fB,cB,lB,hB,pB,dB,vB,mB,gB,_B,yB,bB,wB,SB,AB,xB,EB,DB,PB,IB,MB,OB,TB,CB,FB,LB,RB,zB,NB,WB,HB,BB,UB,jB,GB,KB,VB,ZB,qB,XB,YB,JB,$B,tU,eU,nU,rU,oU,iU,aU,sU,uU,fU,cU,lU,hU,pU,dU,vU,mU,gU,_U,yU,bU,wU,SU,AU,xU,EU,DU,PU,IU,MU,OU,TU,CU,FU,LU,RU,zU,NU,WU,HU,BU,UU,jU,GU,KU,VU,ZU,qU,XU,YU,JU,$U,tj,ej,nj,rj,oj,ij,aj,sj,uj,fj,cj,lj,hj,pj,dj,vj,mj,gj,_j,yj,bj,wj,Sj,Aj,xj,Ej,Dj,Pj,Ij,Mj,Oj,Tj,Cj,Fj,Lj,Rj,zj,Nj,Wj,Hj,Bj,Uj,jj,Gj,Kj,Vj,Zj,qj,Xj,Yj,Jj,$j,tG,eG,nG,rG,oG,iG,aG,sG,uG,fG,cG,lG,hG,pG,dG,vG,mG,gG,_G,yG,bG,wG,SG,AG,xG,EG,DG,PG,IG,MG,OG,TG,CG,FG,LG,RG,zG,NG,WG,HG,BG,UG,jG,GG,KG,VG,ZG,qG,XG,YG,JG,$G,tK=function(){function e(t,e){return this._program=t,this._uniforms=e}var n={};return e.prototype.set=function(e,r){var o=this._uniforms[e],i=this._program.context,a=this.id;t.WebGLRenderer.isWebGL2?i.uniformMatrix4fv(a,n[4][4],!1,r):i.uniformMatrix4fv(a,n,r)},e}(),vK=[],mK=0,gK=new Float32Array(1),_K=[],yK=[],bK=0,wK=0,SK={};i.addEventListener("webglcontextlost",function(t){t.preventDefault(),uK=!0,bK=0,setTimeout((function(){i.getContext("webgl",{antialias:!1,alpha:!0,stencil:!1,depth:!0})}),1)},!1),i.addEventListener("webglcontextrestored",function(){for(var t in iK(),SK)SK[t].needsUpdate=!0;uK=!1},!1);var AK,xK,EK;function DK(t,e){return t.length===e.length&&function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}(t,e)}function PK(t,e){return Math.abs(t-e)<=Number.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}function IK(t){void 0===h&&(h=s.createShader(s.VERTEX_SHADER,"precision highp float;attribute vec2 aVertexPosition;varying vec2 vTextureCoord;void main(void){gl_Position=vec4(aVertexPosition,0.0,1.0);vTextureCoord=aVertexPosition*0.5+0.5;}"),c=s.createShader(s.FRAGMENT_SHADER,"precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;void main(void){gl_FragColor=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));}"),l=s.createProgram(),s.attachShader(l,h),s.attachShader(l,c),s.linkProgram(l),s.useProgram(l),s.getAttribLocation(l,"aVertexPosition"),s.getUniformLocation(l,"uSampler"),u=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,u),s.bufferData(s.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),s.STATIC_DRAW),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(0),f=s.createTexture(),s.bindTexture(s.TEXTURE_2D,f),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE)),s.bindTexture(s.TEXTURE_2D,f),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t),s.drawArrays(s.TRIANGLE_STRIP,0,4)}function MK(t,e){t.copy(e),t.premultiplyAlpha=e.premultiplyAlpha,t.needsUpdate=!0}function OK(t){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t.width,t.height,0,s.RGBA,s.UNSIGNED_BYTE,null)}function TK(t){return dK(t)?(vK[mK++]=t,t):t}function CK(t){var e,n=t.length;for(e=0;e<n;e+=1)TK(t[e])}function FK(t){s.activeTexture(s.TEXTURE0+t),d=t}function LK(t,e){t!==m&&(s.bindFramebuffer(s.FRAMEBUFFER,e),m=t,v=e)}function RK(t,e){t!==y&&(s.bindRenderbuffer(s.RENDERBUFFER,e),y=t)}function zk(t,e){if(t!==g)switch(s.bindBuffer(e,t),g=t,e){case s.ARRAY_BUFFER:st=t;break;case s.ELEMENT_ARRAY_BUFFER:ut=t}}function NK(t){void 0===vK[t]&&(vK[t]=s.createTexture()),s.bindTexture(s.TEXTURE_2D,vK[t])}function WK(t,e,n){var r;if(t.isInstanced){var o=t.maxInstancedCount;o=void 0!==e.count?Math.min(e.count,o):o,t.maxInstancedCount=o,t.__webglInstancedArrays.vertexAttribDivisorANGLE(n,e.divisor)}else(r=s.getAttribLocation(at,e.name))>=0&&(s.enableVertexAttribArray(r),e.location=r)}function HK(t){var e,n;for(e=0,n=yK.length;e<n;e+=1)yK[e]>=0&&s.disableVertexAttribArray(e)}function BK(t,e,n,r){s.vertexAttribPointer(t,e,n,r.normalized,r.stride,r.offset)}function UK(t,e){t.value!==e&&(s.lineWidth(e),t.value=e)}function jK(t,e,n){var r;if(t.front!==e||t.back!==n)switch(t.front=e,t.back=n,r=n!==e?s.SEPARATE:s.FUNC_ADD,e){case 256:s.blendEquationSeparate(s.FUNC_ADD,r);break;case 257:s.blendEquationSeparate(s.FUNC_SUBTRACT,r);break;case 258:s.blendEquationSeparate(s.FUNC_REVERSE_SUBTRACT,r);break;case 259:s.blendEquationSeparate(32777,r);break;case 260:s.blendEquationSeparate(32776,r)}}function GK(t,e,n,r,o){if(t.srcRGB!==e||t.dstRGB!==n||t.srcAlpha!==r||t.dstAlpha!==o)s.blendFuncSeparate(e,n,r,o),t.srcRGB=e,t.dstRGB=n,t.srcAlpha=r,t.dstAlpha=o}function KK(t){return 100===t?s.NEAREST:101===t?s.LINEAR:200===t?s.NEAREST_MIPMAP_NEAREST:201===t?s.LINEAR_MIPMAP_NEAREST:202===t?s.NEAREST_MIPMAP_LINEAR:203===t?s.LINEAR_MIPMAP_LINEAR:void 0}function VK(t,e){t!==p&&(s.cullFace(e),p=t)}function ZK(t,e){t!==c&&(s.frontFace(e),c=t)}function qK(t){return 1e3===t?s.REPEAT:1001===t?s.CLAMP_TO_EDGE:1002===t?s.MIRRORED_REPEAT:void 0}function XK(t,e){s.texParameteri(t,s.TEXTURE_WRAP_S,qK(e)),s.texParameteri(t,s.TEXTURE_WRAP_T,qK(e))}function YK(t,e,n){s.texParameteri(t,s.TEXTURE_MAG_FILTER,KK(e)),s.texParameteri(t,s.TEXTURE_MIN_FILTER,KK(n))}function JK(t,e){var n;tK(e)?(n=e,s.generateMipmap(s.TEXTURE_2D)):OK(e),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e),YK(s.TEXTURE_2D,n.magFilter,n.minFilter),XK(s.TEXTURE_2D,n.wrapS,n.wrapT)}function $K(t,e){var n;tK(e)?(n=e,s.generateMipmap(s.TEXTURE_CUBE_MAP)):(OK(e.images[0]),OK(e.images[1]),OK(e.images[2]),OK(e.images[3]),OK(e.images[4]),OK(e.images[5])),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e.images[0]),s.texImage2D(s.TEXTURE_CUBE_MAP_NEGATIVE_X,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e.images[1]),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_Y,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e.images[2]),s.texImage2D(s.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e.images[3]),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_Z,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e.images[4]),s.texImage2D(s.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e.images[5]),YK(s.TEXTURE_CUBE_MAP,n.magFilter,n.minFilter),XK(s.TEXTURE_CUBE_MAP,n.wrapS,n.wrapT),s.uniform1i(t,e)}function tV(t,e){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e.width,e.height,0,s.RGBA,s.UNSIGNED_BYTE,null),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,KK(e.magFilter)),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,KK(e.minFilter))}function eV(t,e,n,r){var o=n.length,i=e.value,a=r.texture.type;if(void 0===i||null===i)s.uniform1i(t,null);else{for(var u,f=0;f<o;f+=1)u=i[f],void 0!==u&&null!==u&&(s.uniform1i(t,u.unit),FK(u.unit),s.bindTexture(a,u.__webglTexture));s.uniform1iv(t,n)}}var nV=["precision highp float;","precision highp int;","precision highp sampler2D;","precision highp samplerCube;","","","","","","#define SHADER_NAME [name]","#define VERTEX_TEXTURES","#define GAMMA_FACTOR [gammaFactor]","#define MAX_BONES [maxBones]","#define BONE_TEXTURE","#define NUM_CLIPPING_PLANES [numClippingPlanes]","#define UNION_CLIPPING_PLANES [numUnionClippingPlanes]","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","t.WebGL2RenderingContext?t.WebGL2RenderingContext:t.WebGLRenderingContext,s=i.getContext("webgl",{antialias:!1,alpha:!0,stencil:!1,depth:!0}),this.context=s,this.isWebGL2=s instanceof r,u=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),f=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=s.getParameter(s.FRONT_FACE)===s.CW?"cw":"ccw",l=new Array(u),h=new Array(f),p=null,d=0,v=null,m=null,g=null,_=null,y=null,b=0,w=null,S=0,A=0,x=null,E=null,D=null,P=!0,I=!1,M=!1,O=!1,T=!1,C=!1,F=!1,L=!1,R=null,k=0,z=new t.Color(16777215),N=null,W=null,H=null,B=null,U=null,j=null,G=null,K=null,V=null,Z=null,q=null,X=null,Y=null,J=null,$=null,tt=null,et=null,nt=null,rt=null,ot=null,it=null,at=null,st=null,ut=null,ft=null,ct=null,lt=null,ht=null,pt=null,dt=null,vt=null,mt=null,gt=null,_t=null,yt=null,bt=null,wt=null,St=null,At=null,xt=null,Et=null,Dt=null,Pt=null,It=null,Mt=null,Ot=null,Tt=null,Ct=null,Ft=null,Lt=null,Rt=null,zt=null,Nt=null,Wt=null,Ht=null,Bt=null,Ut=null,jt=null,Gt=null,Kt=null,Vt=null,Zt=null,qt=null,Xt=null,Yt=null,Jt=null,$t=null,te=null,ee=null,ne=null,re=null,oe=null,ie=null,ae=null,se=null,ue=null,fe=null,ce=null,le=null,he=null,pe=null,de=null,ve=null,me=null,ge=null,_e=null,ye=null,be=null,we=null,Se=null,Ae=null,xe=null,Ee=null,De=null,Pe=null,Ie=null,Me=null,Oe=null,Te=null,Ce=null,Fe=null,Le=null,Re=null,ze=null,Ne=null,We=null,He=null,Be=null,Ue=null,je=null,Ge=null,Ke=null,Ve=null,Ze=null,qe=null,Xe=null,Ye=null,Je=null,$e=null,tn=null,en=null,nn=null,rn=null,on=null,an=null,sn=null,un=null,fn=null,cn=null,ln=null,hn=null,pn=null,dn=null,vn=null,mn=null,gn=null,_n=null,yn=null,bn=null,wn=null,Sn=null,An=null,xn=null,En=null,Dn=null,Pn=null,In=null,Mn=null,On=null,Tn=null,Cn=null,Fn=null,Ln=null,Rn=null,zn=null,Nn=null,Wn=null,Hn=null,Bn=null,Un=null,jn=null,Gn=null,Kn=null,Vn=null,Zn=null,qn=null,Xn=null,Yn=null,Jn=null,$n=null,tr=null,er=null,nr=null,rr=null,or=null,ir=null,ar=null,sr=null,ur=null,fr=null,cr=null,lr=null,hr=null,pr=null,dr=null,vr=null,mr=null,gr=null,_r=null,yr=null,br=null,wr=null,Sr=null,Ar=null,xr=null,Er=null,Dr=null,Pr=null,Ir=null,Mr=null,Or=null,Tr=null,Cr=null,Fr=null,Lr=null,Rr=null,zr=null,Nr=null,Wr=null,Hr=null,Br=null,Ur=null,jr=null,Gr=null,Kr=null,Vr=null,Zr=null,qr=null,Xr=null,Yr=null,Jr=null,$r=null,to=null,eo=null,no=null,ro=null,oo=null,io=null,ao=null,so=null,uo=null,fo=null,co=null,lo=null,ho=null,po=null,vo=null,mo=null,go=null,_o=null,yo=null,bo=null,wo=null,So=null,Ao=null,xo=null,Eo=null,Do=null,Po=null,Io=null,Mo=null,Oo=null,To=null,Co=null,Fo=null,Lo=null,Ro=null,zo=null,No=null,Wo=null,Ho=null,Bo=null,Uo=null,jo=null,Go=null,Ko=null,Vo=null,Zo=null,qo=null,Xo=null,Yo=null,Jo=null,$o=null,ti=null,ei=null,ni=null,ri=null,oi=null,ii=null,ai=null,si=null,ui=null,fi=null,ci=null,li=null,hi=null,pi=null,di=null,vi=null,mi=null,gi=null,_i=null,yi=null,bi=null,wi=null,Si=null,Ai=null,xi=null,Ei=null,Di=null,Pi=null,Ii=null,Mi=null,Oi=null,Ti=null,Ci=null,Fi=null,Li=null,Ri=null,zi=null,Ni=null,Wi=null,Hi=null,Bi=null,Ui=null,ji=null,Gi=null,Ki=null,Vi=null,Zi=null,qi=null,Xi=null,Yi=null,Ji=null,$i=null,tl=null,el=null,nl=null,rl=null,ol=null,il=null,al=null,sl=null,ul=null,fl=null,cl=null,ll=null,hl=null,pl=null,dl=null,vl=null,ml=null,gl=null,_l=null,yl=null,bl=null,wl=null,Sl=null,Al=null,xl=null,El=null,Dl=null,Pl=null,Il=null,Ml=null,Ol=null,Tl=null,Cl=null,Fl=null,Ll=null,Rl=null,zl=null,Nl=null,Wl=null,Hl=null,Bl=null,Ul=null,jl=null,Gl=null,Kl=null,Vl=null,Zl=null,ql=null,Xl=null,Yl=null,Jl=null,$l=null,th=null,eh=null,nh=null,rh=null,oh=null,ih=null,ah=null,sh=null,uh=null,fh=null,ch=null,lh=null,hh=null,ph=null,dh=null,vh=null,mh=null,gh=null,_h=null,yh=null,bh=null,wh=null,Sh=null,Ah=null,xh=null,Eh=null,Dh=null,Ph=null,Ih=null,Mh=null,Oh=null,Th=null,Ch=null,Fh=null,Lh=null,Rh=null,zh=null,Nh=null,Wh=null,Hh=null,Bh=null,Uh=null,jh=null,Gh=null,Kh=null,Vh=null,Zh=null,qh=null,Xh=null,Yh=null,Jh=null,$h=null,tp=null,ep=null,np=null,rp=null,op=null,ip=null,ap=null,sp=null,up=null,fp=null,cp=null,lp=null,hp=null,pp=null,dp=null,vp=null,mp=null,gp=null,_p=null,yp=null,bp=null,wp=null,Sp=null,Ap=null,xp=null,Ep=null,Dp=null,Pp=null,Ip=null,Mp=null,Op=null,Tp=null,Cp=null,Fp=null,Lp=null,Rp=null,zp=null,Np=null,Wp=null,Hp=null,Bp=null,Up=null,jp=null,Gp=null,Kp=null,Vp=null,Zp=null,qp=null,Xp=null,Yp=null,Jp=null,$p=null,td=null,ed=null,nd=null,rd=null,od=null,id=null,ad=null,sd=null,ud=null,fd=null,cd=null,ld=null,hd=null,pd=null,dd=null,vd=null,md=null,gd=null,_d=null,yd=null,bd=null,wd=null,Sd=null,Ad=null,xd=null,Ed=null,Dd=null,Pd=null,Id=null,Md=null,Od=null,Td=null,Cd=null,Fd=null,Ld=null,Rd=null,zd=null,Nd=null,Wd=null,Hd=null,Bd=null,Ud=null,jd=null,Gd=null,Kd=null,Vd=null,Zd=null,qd=null,Xd=null,Yd=null,Jd=null,$d=null,tv=null,ev=null,nv=null,rv=null,ov=null,iv=null,av=null,sv=null,uv=null,fv=null,cv=null,lv=null,hv=null,pv=null,dv=null,vv=null,mv=null,gv=null,_v=null,yv=null,bv=null,wv=null,Sv=null,Av=null,xv=null,Ev=null,Dv=null,Pv=null,Iv=null,Mv=null,Ov=null,Tv=null,Cv=null,Fv=null,Lv=null,Rv=null,zv=null,Nv=null,Wv=null,Hv=null,Bv=null,Uv=null,jv=null,Gv=null,Kv=null,Vv=null,Zv=null,qv=null,Xv=null,Yv=null,Jv=null,$v=null,tm=null,em=null,nm=null,rm=null,om=null,im=null,am=null,sm=null,um=null,fm=null,cm=null,lm=null,hm=null,pm=null,dm=null,vm=null,mm=null,gm=null,_m=null,ym=null,bm=null,wm=null,Sm=null,Am=null,xm=null,Em=null,Dm=null,Pm=null,Im=null,Mm=null,Om=null,Tm=null,Cm=null,Fm=null,Lm=null,Rm=null,zm=null,Nm=null,Wm=null,Hm=null,Bm=null,Um=null,jm=null,Gm=null,Km=null,Vm=null,Zm=null,qm=null,Xm=null,Ym=null,Jm=null,$m=null,tg=null,eg=null,ng=null,rg=null,og=null,ig=null,ag=null,sg=null,ug=null,fg=null,cg=null,lg=null,hg=null,pg=null,dg=null,vg=null,mg=null,gg=null,_g=null,yg=null,bg=null,wg=null,Sg=null,Ag=null,xg=null,Eg=null,Dg=null,Pg=null,Ig=null,Mg=null,Og=null,Tg=null,Cg=null,Fg=null,Lg=null,Rg=null,zg=null,Ng=null,Wg=null,Hg=null,Bg=null,Ug=null,jg=null,Gg=null,Kg=null,Vg=null,Zg=null,qg=null,Xg=null,Yg=null,Jg=null,$g=null,t_=null,e_=null,n_=null,r_=null,o_=null,i_=null,a_=null,s_=null,u_=null,f_=null,c_=null,l_=null,h_=null,p_=null,d_=null,v_=null,m_=null,g_=null,__=null,y_=null,b_=null,w_=null,S_=null,A_=null,x_=null,E_=null,D_=null,P_=null,I_=null,M_=null,O_=null,T_=null,C_=null,F_=null,L_=null,R_=null,z_=null,N_=null,W_=null,H_=null,B_=null,U_=null,j_=null,G_=null,K_=null,V_=null,Z_=null,q_=null,X_=null,Y_=null,J_=null,$_=null,ty=null,ey=null,ny=null,ry=null,oy=null,iy=null,ay=null,sy=null,uy=null,fy=null,cy=null,ly=null,hy=null,py=null,dy=null,vy=null,my=null,gy=null,_y=null,yy=null,by=null,wy=null,Sy=null,Ay=null,xy=null,Ey=null,Dy=null,Py=null,Iy=null,My=null,Oy=null,Ty=null,Cy=null,Fy=null,Ly=null,Ry=null,zy=null,Ny=null,Wy=null,Hy=null,By=null,Uy=null,jy=null,Gy=null,Ky=null,Vy=null,Zy=null,qy=null,Xy=null,Yy=null,Jy=null,$y=null,tb=null,eb=null,nb=null,rb=null,ob=null,ib=null,ab=null,sb=null,ub=null,fb=null,cb=null,lb=null,hb=null,pb=null,db=null,vb=null,mb=null,gb=null,_b=null,yb=null,bb=null,wb=null,Sb=null,Ab=null,xb=null,Eb=null,Db=null,Pb=null,Ib=null,Mb=null,Ob=null,Tb=null,Cb=null,Fb=null,Lb=null,Rb=null,zb=null,Nb=null,Wb=null,Hb=null,Bb=null,Ub=null,jb=null,Gb=null,Kb=null,Vb=null,Zb=null,qb=null,Xb=null,Yb=null,Jb=null,$b=null,tw=null,ew=null,nw=null,rw=null,ow=null,iw=null,aw=null,sw=null,uw=null,fw=null,cw=null,lw=null,hw=null,pw=null,dw=null,vw=null,mw=null,gw=null,_w=null,yw=null,bw=null,ww=null,Sw=null,Aw=null,xw=null,Ew=null,Dw=null,Pw=null,Iw=null,Mw=null,Ow=null,Tw=null,Cw=null,Fw=null,Lw=null,Rw=null,zw=null,Nw=null,Ww=null,Hw=null,Bw=null,Uw=null,jw=null,Gw=null,Kw=null,Vw=null,Zw=null,qw=null,Xw=null,Yw=null,Jw=null,$w=null,tS=null,eS=null,nS=null,rS=null,oS=null,iS=null,aS=null,sS=null,uS=null,fS=null,cS=null,lS=null,hS=null,pS=null,dS=null,vS=null,mS=null,gS=null,_S=null,yS=null,bS=null,wS=null,SS=null,AS=null,xS=null,ES=null,DS=null,PS=null,IS=null,MS=null,OS=null,TS=null,CS=null,FS=null,LS=null,RS=null,zS=null,NS=null,WS=null,HS=null,BS=null,US=null,jS=null,GS=null,KS=null,VS=null,ZS=null,qS=null,XS=null,YS=null,JS=null,$S=null,tA=null,eA=null,nA=null,rA=null,oA=null,iA=null,aA=null,sA=null,uA=null,fA=null,cA=null,lA=null,hA=null,pA=null,dA=null,vA=null,mA=null,gA=null,_A=null,yA=null,bA=null,wA=null,SA=null,AA=null,xA=null,EA=null,DA=null,PA=null,IA=null,MA=null,OA=null,TA=null,CA=null,FA=null,LA=null,RA=null,zA=null,NA=null,WA=null,HA=null,BA=null,UA=null,jA=null,GA=null,KA=null,VA=null,ZA=null,qA=null,XA=null,YA=null,JA=null,$A=null,tx=null,ex=null,nx=null,rx=null,ox=null,ix=null,ax=null,sx=null,ux=null,fx=null,cx=null,lx=null,hx=null,px=null,dx=null,vx=null,mx=null,gx=null,_x=null,yx=null,bx=null,wx=null,Sx=null,Ax=null,xx=null,Ex=null,Dx=null,Px=null,Ix=null,Mx=null,Ox=null,Tx=null,Cx=null,Fx=null,Lx=null,Rx=null,zx=null,Nx=null,Wx=null,Hx=null,Bx=null,Ux=null,jx=null,Gx=null,Kx=null,Vx=null,Zx=null,qx=null,Xx=null,Yx=null,Jx=null,$x=null,tE=null,eE=null,nE=null,rE=null,oE=null,iE=null,aE=null,sE=null,uE=null,fE=null,cE=null,lE=null,hE=null,pE=null,dE=null,vE=null,mE=null,gE=null,_E=null,yE=null,bE=null,wE=null,SE=null,AE=null,xE=null,EE=null,DE=null,PE=null,IE=null,ME=null,OE=null,TE=null,CE=null,FE=null,LE=null,RE=null,zE=null,NE=null,WE=null,HE=null,BE=null,UE=null,jE=null,GE=null,KE=null,VE=null,iK(),X=s.getExtension("OES_texture_float"),Y=s.getExtension("OES_texture_float_linear"),J=s.getExtension("OES_texture_half_float"),$=s.getExtension("OES_texture_half_float_linear"),tt=s.getExtension("OES_standard_derivatives"),et=s.getExtension("OES_element_index_uint"),nt=s.getExtension("ANGLE_instanced_arrays"),rt=s.getExtension("OES_vertex_array_object"),ot={};var rV={};function oV(t,e,n){var r;return void 0===vK[e]&&(vK[e]=s.createTexture()),s.bindTexture(n,vK[e]),r=vK[e]}function iV(t){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,new Uint8Array(4)),oV(0,tK(new e.DataTexture(new Uint8Array([255,255,255,255]),1,1,1021)),s.TEXTURE_2D)}function aV(){var t;for(iV(v),t=0;t<u;t+=1)l[t]=null;for(t=0;t<f;t+=1)h[t]=null;for(t=0,mK=vK.length;t<mK;t+=1)s.deleteTexture(vK[t]);for(t=0,bK=_K.length;t<bK;t+=1)s.deleteBuffer(_K[t]);for(t=0,wK=yK.length;t<wK;t+=1)s.deleteProgram(yK[t]);vK=[],_K=[],yK=[],mK=bK=wK=0}t.WebGLRenderer.Font=function(t,e,n,r,o,i,a,s,u){this.font=t,this.size=e,this.spacing=n,this.color=new t.Color(o),this.style=i,this.variant=a,this.weight=s,this.lines=u},t.WebGLRenderer.Face=function(t,e){this.family=t,this.style=e},this.render=function(t,e){var n,r,o,i;AK={},xK={},EK={},Jt={},Yt={},Zt={},ne={},pe={},$t={},Kt={},qt={},Z=t.fog,q=t.lights,X=t.objects,Y=0,J=X.length;for(this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this.info.memory.geometries=0,this.info.memory.textures=0,o=0;o<J;o+=1)i=(n=X[o]).geometry,r=n.material,this.info.memory.geometries++,void 0!==r&&r.map&&this.info.memory.textures++;if(Z&&Z.isFog){if(void 0===te)if(te=new t.Color(Z.color.getHex()),Z.isFogExp2)ye={p:1,u:{fogColor:{type:"c",value:te},fogDensity:{type:"f",value:Z.density}}};else{ye={p:1,u:{fogColor:{type:"c",value:te},fogNear:{type:"f",value:Z.near},fogFar:{type:"f",value:Z.far}}};}else te.setHex(Z.color.getHex()),Z.isFogExp2?ye.u.fogDensity.value=Z.density:(ye.u.fogNear.value=Z.near,ye.u.fogFar.value=Z.far)}else ye=void 0;if(0<q.length){var tV,eV,nV,rV;if(AK={},xK={},EK={},Jt={},Yt={},Zt={},ne={},pe={},$t={},Kt={},qt={},this.shadowMap.enabled){for(o=0,iV=q.length;o<iV;o+=1)if(eV=q[o],eV.castShadow){var oV=eV.shadow.map.width,iV=eV.shadow.map.height;eV.shadow.camera.left=-oV/2,eV.shadow.camera.right=oV/2,eV.shadow.camera.top=iV/2,eV.shadow.camera.bottom=-iV/2,this.shadowMap.render(X,o,iV)}}for(o=0,iV=q.length;o<iV;o+=1)eV=q[o],tV=eV.color,nV=eV.intensity,rV=eV.position,eV.isAmbientLight?(AK.r+=tV.r*nV,AK.g+=tV.g*nV,AK.b+=tV.b*nV):eV.isDirectionalLight?(xK[Y]=eV,Y++):eV.isPointLight?EK[Y]=eV:eV.isSpotLight?Jt[Y]=eV:eV.isHemisphereLight&&(Yt[Y]=eV)}ge=Y;var aV=function(t,e){var n;for(n in e)if(e[n]!==t[n])return!1;return!0};for(LK(null),this.setClearColor(t.background,t.backgroundAlpha),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),o=0;o<J;o+=1)n=X[o],(i=n.geometry)&&(r=n.material)&&n.visible&&function(t,e,n,r){var o,i,a,u,f,c,h,p,d,v,m,g,_,y,b,w,S,A,x,E,D,P,I,M,O,T,C,F,L,R,k,z,N,W,H,B,U,j,G,K,V,Z,q,X,Y,J,$,tt,et,nt,rt,ot,it,at,st,ut,ft,ct;if(n.isImmediateRenderObject)I=t.matrixWorld,LK(null),this.renderBufferImmediate(n,t,e);else{if(void 0===n.morphTargetInfluences)O=1;else{if(o=n.geometry.morphAttributes.position,i=n.geometry.morphAttributes.normal,0===o.length)return;O=n.morphTargetInfluences,u=(a=n.morphTargetDictionary).length;for(f=0;f<u;f+=1)c=a[f],h=O[f],void 0===_e[c]&&(_e[c]={}),_e[c].name=c,_e[c].value=h}if(n.isMesh)n.geometry.isBufferGeometry?v=n.geometry:(p=rV[n.geometry.id])?v=p:((d=new t.BufferGeometry).fromGeometry(n.geometry),v=rV[n.geometry.id]=d):g=n.material;else if(n.isLine)n.geometry.isBufferGeometry?v=n.geometry:((p=rV[n.geometry.id])?v=p:((d=new t.BufferGeometry).fromGeometry(n.geometry),v=rV[n.geometry.id]=d),v.isLine=n.isLine,v.isLineSegments=n.isLineSegments,g=n.material);else{if(!n.isSprite)return;g=n.material}if(Array.isArray(g))for(P=g,b=0,w=P.length;b<w;b+=1)S=P[b],A=S.id,A in Yt||(Yt[A]=[]),Yt[A].push(n);else S=g,A=S.id,A in Yt||(Yt[A]=[]),Yt[A].push(n);for(E in D=Yt,Yt={},D)for(x=D[E],H=(S=oV[E]).program,at=H,FK(0),s.useProgram(H),W=S.uniforms,b=0,w=S.id.length;b<w;b+=1)B=S.id[b],U=S.size[b],j=S.location[b],G=W[B],1===U&&s.uniform1f(j,G),2===U&&s.uniform2f(j,G[0],G[1]),3===U&&s.uniform3f(j,G[0],G[1],G[2]),4===U&&s.uniform4f(j,G[0],G[1],G[2],G[3]),5===U&&s.uniform1fv(j,G),6===U&&s.uniform2fv(j,G),7===U&&s.uniform3fv(j,G),8===U&&s.uniform4fv(j,G),9===U?s.uniformMatrix2fv(j,!1,G):10===U?s.uniformMatrix3fv(j,!1,G):11===U&&s.uniformMatrix4fv(j,!1,G);if(Zt.modelViewMatrix&&s.uniformMatrix4fv(Zt.modelViewMatrix,n.modelViewMatrix),Zt.projectionMatrix&&s.uniformMatrix4fv(Zt.projectionMatrix,e.projectionMatrix),Zt.normalMatrix&&s.uniformMatrix3fv(Zt.normalMatrix,n.normalMatrix),Zt.cameraPosition&&s.uniform3f(Zt.cameraPosition,e.cameraPosition),Zt.morphTargetInfluences&&s.uniform1fv(Zt.morphTargetInfluences,O),ye){if(K=S.fog,ye.p)s.uniform3f(K.color,ye.u.fogColor.value),ye.isFogExp2?s.uniform1f(K.density,ye.u.fogDensity.value):(s.uniform1f(K.near,ye.u.fogNear.value),s.uniform1f(K.far,ye.u.fogFar.value));else s.uniform3f(K.color,ye.u.fogColor),ye.isFogExp2?s.uniform1f(K.density,ye.u.fogDensity):(s.uniform1f(K.near,ye.u.fogNear),s.uniform1f(K.far,ye.u.fogFar))}if(0<ge)if(aV(S.ambient,AK))s.uniform3f(S.ambient,AK.r,AK.g,AK.b);else for(b=0;b<ge;b+=1)s.uniform3f(S.directionalLights[b].color,xK[b].color),s.uniform3f(S.directionalLights[b].direction,xK[b].direction);V=v.attributes,Z=S.attributes,q=0;for(Y in Z)void 0!==V[Y]&&(X=V[Y],s.bindBuffer(s.ARRAY_BUFFER,X.buffer),BK(Z[Y],X.itemSize,s.FLOAT,X),q++);for(b=0,w=x.length;b<w;b+=1){if(n=x[b],(m=n.geometry).isBufferGeometry||((p=rV[m.id])||((d=new t.BufferGeometry).fromGeometry(m),p=rV[m.id]=d),m=p),I=n.matrixWorld,s.uniformMatrix4fv(Zt.modelMatrix,I),O=n.morphTargetInfluences,_=v.offsets,y=v.drawcalls,void 0!==O)for(f=0;f<u;f+=1)h=O[f],void 0!==S.morphTargetBase&&s.uniform1f(S.morphTargetBase,h);if(v.isLine)UK(this.state.lineWidth,S.linewidth),v.isLineSegments?s.drawArrays(s.LINES,0,v.attributes.position.count):s.drawArrays(s.LINE_STRIP,0,v.attributes.position.count);else if(n.isPoints)s.drawArrays(s.POINTS,0,v.attributes.position.count);else if(void 0!==v.attributes.index){var J=v.attributes.index;$=(v.id,J.id,s.ELEMENT_ARRAY_BUFFER),zk($,J.buffer),0<y.length?s.drawElements(s.TRIANGLES,y[0].count,s.UNSIGNED_SHORT,2*y[0].start):s.drawElements(s.TRIANGLES,J.count,s.UNSIGNED_SHORT,0)}else s.drawArrays(s.TRIANGLES,0,v.attributes.position.count);q++}}}(t,e,n,r)}}(this))}});
    
    const exports = {};
    const three = globalThis.THREE;
    factory(exports, three);
    globalThis.troika_three_text = exports;
  })();